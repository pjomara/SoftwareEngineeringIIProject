//Doesn't work as-is (sqlite connection needs formatting) and needs some cleaning

using System;
using Android.Views;
using Android.Content;
using Android.Runtime;
using Android.App;
using Android.Widget;
using Android.OS;
using Android.Content.Res;
using System.IO;
using SQLite;
using System.Linq;




namespace nutr_grabber
{
    [Activity(Label = "nutr_grabber", MainLauncher = true, Icon = "@drawable/icon")]
    public class MainActivity : Activity
    {
        string str1;

        protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);

            // Set our view from the "main" layout resource
            // SetContentView (Resource.Layout.Main);
            SetContentView(Resource.Layout.Main);

            TextView message = FindViewById<TextView>(Resource.Id.message);
            EditText ingred = FindViewById<EditText>(Resource.Id.enterHere);
            Button search = FindViewById<Button>(Resource.Id.search);

            string folder = System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal);
            var db = new SQLiteConnection(System.IO.Path.Combine(folder, "UsdDataProto.db"));
            db.CreateTable<usdProto>();
            
            /*
            new AlertDialog.Builder(this)
                .SetMessage(db.Table<usdProto>().Where(v => v.Shrt_Desc.Contains("BUTTE")).ToString())
                .Show();
            */

            search.Click += (object sender, EventArgs e) =>
            {
                str1 = ingred.Text;
              

                var query = db.Table<usdProto>().Where(v => v.Shrt_Desc.Contains("BUTTER"));
                
                    new AlertDialog.Builder(this)
                     .SetMessage(query.ToString())
                     .Show();
                
                //List<string> Item = db.Query<usdProto>("SELECT Energ_Kcal FROM usdProto WHERE Shrt_Desc = ?", str1);
                //db.Close();
                /*  string content;
                   AssetManager assets = this.Assets;
                   using (StreamReader sr = new StreamReader(assets.Open("UsdDataProto.db")))
                   {
                       content = sr.ReadLine();
                   }
                 */

            /*  
              new AlertDialog.Builder(this)
              .SetMessage(Item.GetType().ToString())
              .Show();
    */
            
            };
            
           

        }
    }

    public class usdProto
    {
        [PrimaryKey]
        
        public int NDB_No { get; set; }
        public string Shrt_Desc { get; set; }
        public int Energ_Kcal { get; set; }
        public int Protein_g { get; set; }
        public int Lipid_Tot_g { get; set; }
        public int Ash_g { get; set; }
        public int Carbohydrt_g { get; set; }
        public int Fiber_TD_g { get; set; }
        public int Sugar_Tot_g { get; set; }
        public int Calcium_mg { get; set; }
        public int Iron_mg { get; set; }
        public int Magnesium_mg { get; set; }
        public int Phosphorus_mg { get; set; }
        public int Potassium_mg { get; set; }
        public int Sodium_mg { get; set; }
        public int Zinc_mg { get; set; }
        public int Copper_mg { get; set; }
        public int Manganese_mg { get; set; }
        public int Selenium_ug { get; set; }
        public int Vit_C_mg { get; set; }
        public int Thiamin_mg { get; set; }
        public int Riboflavin_mg { get; set; }
        public int Niacin_mg { get; set; }
        public int Panto_Acid_mg { get; set; }
        public int Vit_B6_mg { get; set; }
        public int Folate_Tot_ug { get; set; }
        public int Folic_Acid_ug { get; set; }
        public int Food_Folate_ug { get; set; }
        public int Folate_DFE_ug { get; set; }
        public int Choline_Tot_mg { get; set; }
        public int Vit_B12_ug { get; set; }
        public int Vit_A_IU { get; set; }
        public int Vit_A_RAE { get; set; }
        public int Retinol_ug { get; set; }
        public int Alpha_Carot_ug { get; set; }
        public int Beta_Carot_ug { get; set; }
        public int Beta_Crypt_ug { get; set; }
        public int Lycopene_ug { get; set; }
        public int Lut_Zea_ug { get; set; }
        public int Vit_E_mg { get; set; }
        public int Vit_D_ug { get; set; }
        public int Vit_D_IU { get; set; }
        public int Vit_K_ug { get; set; }
        public int FA_Sat_g { get; set; }
        public int FA_Mono_g { get; set; }
        public int FA_Poly_g { get; set; }
        public int Cholestrl_mg { get; set; }
        public int Gm_unit { get; set; }
        public int num { get; set; }
        public int unit {get;set;}
       

    }
}

